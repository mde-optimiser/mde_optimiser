version: '2'
services:
  queue:
    build:
      context: ./queue
      dockerfile: Dockerfile
    ports:
      - "5762:5762"
  database:
    build:
      context: ./database
      dockerfile: Dockerfile
    ports:
      - "8082:8082"
      - "9092:9092"
  worker:
    build:
      context: ./worker
      dockerfile: Dockerfile
    volumes:
        - ../../src:/var/app/mdeo
    links: 
        - "queue"
  dataloader:
    build:
      context: ./loader
      dockerfile: Dockerfile
    volumes:
        - ../dataloader:/var/app/loader
        - ../dataloader/lib:/var/app/loader/lib
    links:
        - "database"
        - "queue"
  web:
    build:
      context: ./web
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    volumes:
     - ../../dashboard/web/uk.ac.kcl.mdeoptimise.statusdashboard:/var/app/web

