version: '2'
services:
  queue:
    build:
      context: ./queue
      dockerfile: Dockerfile
    ports:
      - "5762:5762"
      - "8080:8080"
  database:
    build:
      context: ./database
      dockerfile: Dockerfile
    ports:
      - "8082:8082"
      - "9092:9092"
  worker:
    build:
      context: ./worker
      dockerfile: Dockerfile
    volumes:
        - /Users/tammaramanasieva/Documents/Workspace/mde_optimiser_github/.metadata/.plugins/org.eclipse.pde.core/.bundle_pool/plugins/:/var/app/plugins
        - ../../src/plugins/uk.ac.kcl.mdeoptimise/target/classes:/var/app/mdeo/uk.ac.kcl.mdeoptimise/target/classes
        - ../../src/plugins/uk.ac.kcl.mdeoptimise.ui/target/classes:/var/app/mdeo/uk.ac.kcl.mdeoptimise.ui/target/classes
        - ../../src/plugins/uk.ac.kcl.mdeoptimise.tests/target/classes:/var/app/mdeo/uk.ac.kcl.mdeoptimise.tests/target/classes
        - ../../src/dashboard/uk.ac.kcl.mdeoptimise.dashboard.api/target/classes:/var/app/mdeo/uk.ac.kcl.mdeoptimise.dashboard.api/target/classes
    links: 
        - "queue"
  dataloader:
    build:
      context: ./loader
      dockerfile: Dockerfile
    volumes:
        - ../../dashboard/dataloader/bin:/var/app/mdeo/uk.ac.kcl.mdeoptimise.dataloader
        - ../../dashboard/dataloader/lib:/var/app/mdeo/uk.ac.kcl.mdeoptimise.dataloader.lib
    links:
        - "database"
        - "queue"
  # web:
  #   build:
  #     context: ./web
  #     dockerfile: Dockerfile
  #   ports:
  #     - "8080:8080"
  #   volumes:
  #     - ../../dashboard/web/uk.ac.kcl.mdeoptimise.dashboard:var/app/mdeo/uk.ac.kcl.mdeoptimise.web
